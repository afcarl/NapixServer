

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Howto write Napix modules &mdash; Napix 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Napix 0.1 documentation" href="index.html" />
    <link rel="next" title="Howto write a Napix module with the low level interface" href="low_level.html" />
    <link rel="prev" title="First steps in the writing of a manager" href="first_step.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="low_level.html" title="Howto write a Napix module with the low level interface"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="first_step.html" title="First steps in the writing of a manager"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Napix 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="howto-write-napix-modules">
<span id="high-level"></span><h1>Howto write Napix modules<a class="headerlink" href="#howto-write-napix-modules" title="Permalink to this headline">¶</a></h1>
<p>In this howto you will learn to write a quick Napix module.
In order to write this module you have to write a <strong>manager</strong> and install it in the Napix server.
A Napix module may be in every place that is accessible in the python path.
Napix adds <tt class="file docutils literal"><span class="pre">/var/lib/napix/</span></tt> in the python path, and it automatically tries to load every module in <tt class="file docutils literal"><span class="pre">/var/lib/napix/auto</span></tt>.</p>
<p>For more details about the loading of modules inside Napix, see the <a class="reference internal" href="deployment.html#auto-loading"><em>loading page</em></a></p>
<p>For this example we will be write a manager for the hosts file.
So we create the file <tt class="file docutils literal"><span class="pre">sample1.py</span></tt> in <tt class="file docutils literal"><span class="pre">/var/lib/napix/auto</span></tt> or in <tt class="file docutils literal"><em><span class="pre">/path/to/NapixServer</span></em><span class="pre">/auto</span></tt></p>
<div class="section" id="writing-the-module">
<h2>Writing the module<a class="headerlink" href="#writing-the-module" title="Permalink to this headline">¶</a></h2>
<div class="section" id="napix-class">
<h3>Napix Class<a class="headerlink" href="#napix-class" title="Permalink to this headline">¶</a></h3>
<p>The base class behind every collection is <a class="reference internal" href="managers.html#managers.Manager" title="managers.Manager"><tt class="xref py py-class docutils literal"><span class="pre">managers.Manager</span></tt></a>.
It defines how the collection find, modify and make operations on its resources.</p>
<p>For convenience, some subclasses of <a class="reference internal" href="managers.html#managers.Manager" title="managers.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> are defined in
<a class="reference internal" href="managers.default.html#module-managers.default" title="managers.default"><tt class="xref py py-mod docutils literal"><span class="pre">managers.default</span></tt></a> that ease the creation of a manager at the expense of higher consumption
of CPU and RAM.</p>
<p><a class="reference internal" href="managers.default.html#managers.default.DictManager" title="managers.default.DictManager"><tt class="xref py py-class docutils literal"><span class="pre">DictManager</span></tt></a> is the base class of the manager we will be writing.
It&#8217;s a subclass of <a class="reference internal" href="managers.html#managers.Manager" title="managers.Manager"><tt class="xref py py-class docutils literal"><span class="pre">managers.Manager</span></tt></a> witch implements higher level construct:
with this implementation, it is just needed to make a dict of resource by ID from a persisted data source and to save it back.</p>
<p>For the hosts example, we will write an implementation of this class.
We add a docstring for our class.
It will be used by Napix to document the service.</p>
</div>
<div class="section" id="writing-the-meta-datas">
<h3>Writing the meta-datas<a class="headerlink" href="#writing-the-meta-datas" title="Permalink to this headline">¶</a></h3>
<p>First you need to write the <a class="reference internal" href="managers.html#managers.Manager.resource_fields" title="managers.Manager.resource_fields"><tt class="xref py py-attr docutils literal"><span class="pre">resource_fields</span></tt></a> attribute that describes the resource.</p>
<dl class="docutils">
<dt>For our example, we will use two fields:</dt>
<dd><ul class="first last simple">
<li>a string for the IP address</li>
<li>an array of hostnames related to this IP.</li>
</ul>
</dd>
</dl>
<p>For each of our field, we add a field in the <a class="reference internal" href="managers.html#managers.Manager.resource_fields" title="managers.Manager.resource_fields"><tt class="xref py py-attr docutils literal"><span class="pre">resource_fields</span></tt></a> dictionary containing another dict
describing the field. We add a description and an example.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">napixd.managers.default</span> <span class="kn">import</span> <span class="n">DictManager</span>

<span class="k">class</span> <span class="nc">HostManager</span><span class="p">(</span><span class="n">DictManager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Napix Web service to manage the content of the hosts file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">FILE_PATH</span>  <span class="o">=</span> <span class="s">&#39;/etc/hosts&#39;</span>
    <span class="n">resource_fields</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;hostnames&#39;</span><span class="p">:{</span>
                <span class="s">&#39;description&#39;</span><span class="p">:</span><span class="s">&#39;List of hostname resolving to that IP&#39;</span><span class="p">,</span>
                <span class="s">&#39;example&#39;</span><span class="p">:[</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span><span class="s">&#39;localhost.localdomain&#39;</span><span class="p">]</span>
                <span class="p">},</span>
            <span class="s">&#39;ip&#39;</span><span class="p">:{</span>
                <span class="s">&#39;description&#39;</span><span class="p">:</span><span class="s">&#39;IP of the host&#39;</span><span class="p">,</span>
                <span class="s">&#39;example&#39;</span><span class="p">:</span><span class="s">&#39;127.0.0.1&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The example key is not a default value, it&#8217;s used when the user requests a
<a class="reference internal" href="managers.html#managers.Manager.get_example_resource" title="managers.Manager.get_example_resource"><tt class="xref py py-meth docutils literal"><span class="pre">get_example_resource()</span></tt></a>
as a template to create a new one and for documentation purposes.</p>
</div>
</div>
<div class="section" id="loading-the-resources">
<h3>Loading the resources<a class="headerlink" href="#loading-the-resources" title="Permalink to this headline">¶</a></h3>
<p>In order to get the resources, you have to define the <a class="reference internal" href="managers.default.html#managers.default.ReadOnlyDictManager.load" title="managers.default.ReadOnlyDictManager.load"><tt class="xref py py-meth docutils literal"><span class="pre">load()</span></tt></a> method.
This method must return a dictionary of the resources indexed by their keys.</p>
<p>For the manager we are writing, we will use the line number as an index.
Since we install our manager in the root of the service,
we will ignore the parent parameter in the load and save methods.</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="p">):</span>
        <span class="c">#open the hosts file and keep a copy</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">FILE_PATH</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
            <span class="c">#There is no file, consider it as empty</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">handle</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">line_content</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="nb">map</span><span class="p">(</span> <span class="nb">str</span><span class="o">.</span><span class="n">strip</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="p">),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="c">#filter empty and commented lines</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line_content</span> <span class="ow">or</span> <span class="n">line_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;#&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">line</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">line_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">))</span>
            <span class="c"># Store ID as strings</span>
            <span class="n">resources</span><span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">lineno</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="c">#first token on the host file is the ip</span>
                    <span class="s">&#39;ip&#39;</span> <span class="p">:</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="c">#remaining is the list of hostnames</span>
                    <span class="s">&#39;hostnames&#39;</span> <span class="p">:</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="p">}</span>
        <span class="k">return</span> <span class="n">resources</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-resources">
<h3>Creating resources<a class="headerlink" href="#creating-resources" title="Permalink to this headline">¶</a></h3>
<p>At this point, the resources can be listed, got, deleted and modified.
In order to add new resources, the manager must be able to generate the corresponding ID
of a new resources.
You have to write the method <a class="reference internal" href="managers.default.html#managers.default.DictManager.generate_new_id" title="managers.default.DictManager.generate_new_id"><tt class="xref py py-meth docutils literal"><span class="pre">generate_new_id()</span></tt></a> that will return the id of the new resource
knowing its dictionary.</p>
<p>You may choose to get a UUID, a sequence number, a value from the dictionary, etc,
as long as this id will allow to query the same object in the future, and will be persisted.</p>
<p>In the manager we&#8217;re writing, we are using the line number as identifier,
so we will use the size of the file we already have.</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">generate_new_id</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">resource_dict</span><span class="p">):</span>
        <span class="c">#In order to avoid concurrency issue we add a blank line</span>
        <span class="c"># in the lines attribute so that another call</span>
        <span class="c"># may not give the same line number</span>

        <span class="c">#force load to be run</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resources</span>
        <span class="c">#Add an empty line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="c">#return the position of that line</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="persisting-the-resources">
<h3>Persisting the resources<a class="headerlink" href="#persisting-the-resources" title="Permalink to this headline">¶</a></h3>
<p>The data can now be queried, modified, removed, added.
In order to persist the modifications in the time, you will have to write a save method that will persist
the data you modified.
At every call of persist, you will save all the resources of the manager,
not only those which have been modified.</p>
<p>For the files manager, we will write the hosts files.
As with the load method, we don&#8217;t need the parent parameter, so it will be ignored.</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">resources</span><span class="p">):</span>
        <span class="n">new_file_content</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">original</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">lineno</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="n">lineno</span> <span class="p">)</span>
            <span class="n">stripped</span> <span class="o">=</span> <span class="n">original</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

            <span class="c">#Keep the comments in the file</span>
            <span class="k">if</span> <span class="n">stripped</span> <span class="ow">and</span> <span class="n">stripped</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;#&#39;</span><span class="p">:</span>
                <span class="n">new_file_content</span><span class="p">[</span><span class="n">lineno</span><span class="p">]</span> <span class="o">=</span>  <span class="n">original</span>
                <span class="k">continue</span>

            <span class="n">res_id</span> <span class="o">=</span> <span class="n">lineno</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">stripped</span> <span class="ow">and</span> <span class="n">res_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">:</span>
                <span class="c">#the resource existed and has been removed</span>
                <span class="n">new_file_content</span><span class="p">[</span><span class="n">lineno</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;#;deleted: &#39;</span> <span class="o">+</span> <span class="n">original</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">res_id</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">:</span>
                <span class="c">#the resource exists and may have been modified</span>
                <span class="n">new_file_content</span><span class="p">[</span><span class="n">lineno</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">resources</span><span class="p">[</span> <span class="n">res_id</span> <span class="p">][</span> <span class="s">&#39;ip&#39;</span> <span class="p">],</span>
                    <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span> <span class="n">res_id</span> <span class="p">][</span> <span class="s">&#39;hostnames&#39;</span> <span class="p">]),</span>
                    <span class="p">))</span>

        <span class="n">handle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">FILE_PATH</span> <span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
        <span class="n">handle</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">new_file_content</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="resulting-file">
<h3>Resulting file<a class="headerlink" href="#resulting-file" title="Permalink to this headline">¶</a></h3>
<p>You can download the <a class="reference download internal" href="_downloads/sample1.py"><tt class="xref download docutils literal"><span class="pre">/samples/sample1.py</span></tt></a> file.</p>
</div>
</div>
<div class="section" id="validation">
<h2>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h2>
<p>The user&#8217;s input of our Napix modules should be checked by writing validation methods.
They take the proposed user input as an entry and return the correct data.
There&#8217;s two kind of input to validate or transform:
* the input given by the user when he tries to create or transform the data of the resources
* the id that the user wants to query, for example GET /manager/<strong>resource_id1</strong>.</p>
<div class="section" id="url-token-validation">
<h3>URL token validation<a class="headerlink" href="#url-token-validation" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="managers.html#managers.Manager.validate_id" title="managers.Manager.validate_id"><tt class="xref py py-meth docutils literal"><span class="pre">validate_id()</span></tt></a> is the method which checks the url tokens
(part <strong>resource_id</strong> of /manager/<strong>resource_id1</strong>).
It takes the proposed user input and return the correct user input or, if it&#8217;s wrong,
raises a <a class="reference internal" href="exceptions.html#exceptions.ValidationError" title="exceptions.ValidationError"><tt class="xref py py-exc docutils literal"><span class="pre">ValidationError</span></tt></a> with a message describing the kind of error that has been done.</p>
<p>In our example, we may want to keep the ids as integers</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>It&#8217;s not the time to check for the existence</p>
<p class="last">This method should just check that the ID may be a valid ID for the rest of the methods.
It&#8217;s not the methods in which you should check that a value already exists or not.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">validate_id</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span> <span class="n">id_</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="s">&#39;id have to be integer values&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to make this snippet working, you have to remove the str in <cite>load</cite>, <cite>save</cite> and <cite>generate_new_id</cite></p>
</div>
</div>
<div class="section" id="request-body-validation">
<h3>Request body validation<a class="headerlink" href="#request-body-validation" title="Permalink to this headline">¶</a></h3>
<p>There is two places where the strings are validated.
First in the <a class="reference internal" href="managers.html#managers.Manager.validate_resource_FIELDNAME" title="managers.Manager.validate_resource_FIELDNAME"><tt class="xref py py-meth docutils literal"><span class="pre">validate_resource_*</span></tt></a> methods that check each field individually.
Then in the <a class="reference internal" href="managers.html#managers.Manager.validate_resource" title="managers.Manager.validate_resource"><tt class="xref py py-meth docutils literal"><span class="pre">validate_resource()</span></tt></a> that validate the whole data dictionary.
It may be used to convert integers to strings, clean a string, ensure consistency etc.</p>
<p>Those methods get the object (the whole dict or each field) to validate by argument and must return the correct value.
When a value is incorrect, the method throws a <a class="reference internal" href="exceptions.html#exceptions.ValidationError" title="exceptions.ValidationError"><tt class="xref py py-exc docutils literal"><span class="pre">ValidationError</span></tt></a>
with a string describing the kind of error the user did.</p>
<p>With the HostManager, we may want to check that users are sending an array of strings as the hostnames attribute
and a valid and clean IP address for the ip attribute.</p>
</div>
<div class="section" id="id1">
<h3>Resulting file<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>You can download the <a class="reference download internal" href="_downloads/sample1_validation.py"><tt class="xref download docutils literal"><span class="pre">/samples/sample1_validation.py</span></tt></a> file.</p>
</div>
</div>
<div class="section" id="deployment-and-configuration">
<h2>Deployment and configuration<a class="headerlink" href="#deployment-and-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-into-napix">
<h3>Install into Napix<a class="headerlink" href="#install-into-napix" title="Permalink to this headline">¶</a></h3>
<p>To add the new module to the Napix server, you need to add the path to its class in
the configuration file: <tt class="file docutils literal"><span class="pre">conf/settings.json</span></tt>.</p>
<p>The key <tt class="docutils literal"><span class="pre">Napix.managers</span></tt> hold a dictionary of the manually activated modules.
The key of this dict is the alias of the module, and the value is the path to the module.</p>
<p>Mutliple aliases may refer to the same class, then it will launch multiples instances of the manager.
It may be useful for example to load multiple hosts managers for different hosts files.</p>
</div>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The Napix managers have a method configure that does nothing by default but is called
with the configuration of the module if any.</p>
<p>You may override the configure method of a Napix manager <a class="reference internal" href="managers.html#managers.Manager.configure" title="managers.Manager.configure"><tt class="xref py py-meth docutils literal"><span class="pre">configure()</span></tt></a>.
This classmethod takes an argument which is the configuration found in the settings file.</p>
<p>For the HostManager we may add a configuration option to set another hosts file path.
We may also configure the <cite>url</cite> settings that define on which url the service will be waiting.</p>
<p>The configure method get the dictionary that we set in <tt class="file docutils literal"><span class="pre">conf/settings.json</span></tt>.</p>
</div>
</div>
<div class="section" id="test-case">
<h2>Test case<a class="headerlink" href="#test-case" title="Permalink to this headline">¶</a></h2>
<p>Testing the module is quite easy.
You instantiate a manager with its parent resource if it has one, then you can test the behavior
with of the load and save methods.</p>
<p>For example the tests of the HostManager <a class="reference download internal" href="_downloads/sample1_tests.py"><tt class="xref download docutils literal"><span class="pre">/samples/sample1_tests.py</span></tt></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Howto write Napix modules</a><ul>
<li><a class="reference internal" href="#writing-the-module">Writing the module</a><ul>
<li><a class="reference internal" href="#napix-class">Napix Class</a></li>
<li><a class="reference internal" href="#writing-the-meta-datas">Writing the meta-datas</a></li>
<li><a class="reference internal" href="#loading-the-resources">Loading the resources</a></li>
<li><a class="reference internal" href="#creating-resources">Creating resources</a></li>
<li><a class="reference internal" href="#persisting-the-resources">Persisting the resources</a></li>
<li><a class="reference internal" href="#resulting-file">Resulting file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#validation">Validation</a><ul>
<li><a class="reference internal" href="#url-token-validation">URL token validation</a></li>
<li><a class="reference internal" href="#request-body-validation">Request body validation</a></li>
<li><a class="reference internal" href="#id1">Resulting file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deployment-and-configuration">Deployment and configuration</a><ul>
<li><a class="reference internal" href="#install-into-napix">Install into Napix</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-case">Test case</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="first_step.html"
                        title="previous chapter">First steps in the writing of a manager</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="low_level.html"
                        title="next chapter">Howto write a Napix module with the low level interface</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/high_level.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="low_level.html" title="Howto write a Napix module with the low level interface"
             >next</a> |</li>
        <li class="right" >
          <a href="first_step.html" title="First steps in the writing of a manager"
             >previous</a> |</li>
        <li><a href="index.html">Napix 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Grégoire ROCHER.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>