define("consoleactions",["underscore","napixclient","models/credentials","models/servers"],function(a,b,c,d){var e={},f=function(b,c,d,e){this.filter=c,this.collection=b,this.usage=d,this.callbacks=a.extend(e,this.defaults)};f.prototype={call:function(){var a=this.callback.apply(this,arguments);return a||this.usage},searchModel:function(a){return this.collection.find(function(b){return b.get(this.filter)===a},this)||this.collection.find(function(b){return b.get(this.filter).search(a)!==-1},this)},callback:function(b,c){this.callbacks.hasOwnProperty(b)||(c=b,b="choose");var d=b||"list";if(d==="help")return!1;var e=a.rest(arguments,2);if(d==="add"&&c)return e.unshift(c),this.callbacks.add.apply(this,e);if(d==="list")return this.callbacks[d].apply(this,e);if(d==="choose"||d==="del"){var f=this.searchModel(c||b);e.unshift(f);if(f)return this.callbacks[d].apply(this,e)}},defaults:{list:function(){return this.collection.map(function(a){return a.toString()})},choose:function(a){return a.select(),!0},add:function(a){var b={};return b[this.filter]=a,this.collection.create(b).select(),!0},del:function(a){return a.destroy(),!0}}};var g=function(a,b,c,d){var e=new f(a,b,c,d);return e.call.bind(e)};return e.login=g(c,"login","Usage: login [add|del|choose|list] username [password]",{choose:function(a,b){return b&&a.get("pass")!==b&&(a.set({pass:b}),a.save()),a.select(),!0},add:function(a,b){return b?(c.create({login:a,pass:b}).select(),!0):!1}}),e.login.help=["Usage: login [add|del|choose|list] login [pass]","login list","  List all the credentials","login username","login choose login","  Select the credentials which match login","login choose username pass","  Update te credentials matching username","login add username pass","  add the given credentials","login del username","  remove the credentials matching username"].join("\n"),e.server=g(d,"host","Usage: server [add|del|choose|list] hostname",{}),e.server.help=["Usage: server [add|del|choose|list] hostname","server list","  List all the servers","server hostname","server choose hostname","  Select the server which match hostname","server add hostname","  add the server at the host <hostname>","server del hostname","  remove the server matching hostname"].join("\n"),e.GET=function(a){if(!a)return"Usage: GET url";var c=this;b.GET(a,function(a){c.respond(a)},function(a){console.log(arguments),c.respond(a)})},e.GET.help=" Send a GET request a the given url",e})