"use strict";define("firstrun",["jQuery","main","napixclient","models/servers","libs/bootstrap/bootstrap-tooltip"],function(b,a,d,c){require(["libs/bootstrap/bootstrap-popover"],function(){b(document).ready(function(){var j=a();var k=function(){c.each(function(i){console.log(i,i.get("host")==="this.napix.nx");if(i.get("host")==="this.napix.nx"){i.destroy()}})};var f=[{el:"#connections-servers",title:"Servers",content:["You can connect to any Napix server.","By default, you are connected to the server","you are surfing on."].join("\n"),trigger:"manual",placement:"left",action:function(){d.DELETE("/sample/1/127.0.0.1",function(){},function(){});k()}},{el:"#connections-servers-prompt",action:function(){j.panels.selectors.serverSelector.showPrompt();b("#connections-servers-prompt input[name='host']").prop("value","this.napix.nx")},title:"Add a server",content:["just type the url of the server"].join("\n"),trigger:"manual",placement:"left"},{el:null,action:function(){j.panels.selectors.serverSelector.addItem()}},{el:"#connections-servers .icon-remove:eq(1)",title:"Remove the server",content:["This button removes the server from the list"].join("\n"),trigger:"manual",placement:"bottom"},{el:"#connections-servers-body li:first",tilte:"Select the server",contents:"Click on the server address to choose it",trigger:"manual",placement:"left",action:function(){k();c.first().select()}},{el:"#connections-credentials",title:"Same thing for the credentials",content:"",trigger:"manual",placement:"left"},{el:"#explorer-server",title:"Server root",content:["This is the root of the server.","You can browse the objects and the managers"].join("\n"),trigger:"manual",action:function(){j.panels.explorer.goToPath("/sample")}},{el:"#explorer-server .deploy:first",title:"Explore the manager",content:["Click on the plus in order to","deploy the content of the manager"].join("\n"),trigger:"manual",action:function(){j.panels.explorer.rootView.views["/sample"].toggleContent(true)}},{el:"#explorer-server .path:contains('/sample/1')",title:"Get an object",content:["Click on the object path","to get its content in the object tab"].join("\n"),trigger:"manual",action:function(){j.panels.explorer.rootView.views["/sample"].contentViews["/sample/1"].selectObject()}},{el:"#explorer-object-label",title:"Object Tab",content:["In this tab you can view","the data of the selected object"].join("\n"),trigger:"manual",placement:"top",action:function(){b("#explorer-object-label").tab("show")}},{el:"#explorer-help-label",title:"Help Tab",content:["In this tab you can view the metadata of the selected manager","Those metadata are generated by the class from the Napix modules"].join("\n"),trigger:"manual",placement:"top",action:function(){b("#explorer-help-label").tab("show")}},{el:"#explorer-create-label",title:"Create Tab",content:["In this tab you can create","a new object of the selected manager"].join("\n"),trigger:"manual",placement:"top",action:function(){b("#explorer-create-label").tab("show")}},{el:"#explorer-create",title:"Editor",content:["You can use this editor to","create the object you'll send"].join("\n"),trigger:"manual"},{el:"#explorer-create button:contains('Text')",title:"Text editor",content:["You can use the text editor to","edit directly the JSON object"].join("\n"),placement:"top",trigger:"manual"},{el:"#explorer-create .json-mte:first",title:"Type switcher",content:["Use this little toolbar to change the type of","JSON data you want to send","The red X at the end deletes the entry"].join("\n"),placement:"left",trigger:"manual"},{el:"#explorer-create button:contains('Validate')",title:"Validate button",content:["Send the result"].join("\n"),placement:"left",trigger:"manual"},{el:null,action:function(){j.panels.explorer.create.trigger("validate","/sample/1",{ip:"127.0.0.1",hostnames:["localhost"]})}},{el:"#explorer-server .path:contains('/sample/1/127.0.0.1')",title:"Created resource",content:["The resource is created and got its own address"].join("\n"),trigger:"manual",action:function(){b(".alert").alert("close");j.panels.explorer.rootView.views["/sample"].contentViews["/sample/1"].contentViews["/sample/1/127.0.0.1"].selectObject()}},{el:"#explorer-object-actions button:contains('Edit')",title:"Modify the object",content:"Click on this button to edit the object",trigger:"manual"},{el:null,action:function(){j.panels.explorer.showEdit()}},{el:"#explorer-edit button:contains('Validate')",title:"Sending wrong data",content:"This will result in an error",trigger:"manual",placement:"bottom",action:function(){var i=j.panels.explorer.edit.view.view.view.valueViews[1];i.trigger("pop",i)}},{el:null,action:function(){j.panels.explorer.sendPUT("/sample/1/127.0.0.1",{ip:"127.0.0.1"})}},{el:"#explorer .alert",title:"The error",content:["It pops when a request does not succeed","It shows the kind of error and the associated text","You may click the retry button to resubmit the request","You still can edit the data and resubmit it"].join("\n"),trigger:"manual",placement:"bottom"},{el:"#explorer .alert .close",title:"Close the alert",content:"Click the X to close the alert",trigger:"manual",placement:"left"},{el:null,action:function(){b(".alert").alert("close");b("#explorer-object-label").tab("show")}},{el:"#console",title:"The console",content:"Show the console. With this console you can type commands",placement:"top",trigger:"manual",action:function(){b("#console-label a").tab("show")}},{el:"#console-prompt",title:"Prompt",content:["Type the command you want to run in this prompt.",'Commands include "help", "servers", "login", "GET" '].join("\n"),placement:"top",trigger:"manual",action:function(){b("#console-prompt input:text").attr("value","GET /")}},{el:null,action:function(){j.panels.console.prompt_.validate()}}];var g=0;var e=null;var h=function(){if(e){b(e).popover("hide")}var i=f[g+=1];if(!i){b(document).off("click");return}e=i.el;if(i.action){i.action.call()}b(e).popover(i).popover("show");return true};b(document).on("click",h);h()})})});