"use strict";define("firstrun",["jQuery","main","napixclient","models/servers","libs/bootstrap/bootstrap-popover"],function(f,e,b,l){var c=e();var d=function(){l.each(function(i){if(i.get("host")==="this.napix.nx"){i.destroy()}})};var p=[{el:"#firstrun",title:"Quick tour",content:["Take a quick tour of the feature that this web interface provides. ","Use the the arrows to navigate throught the tooltips"].join("\n"),trigger:"manual",placement:"bottom",},{el:"#connections-servers",title:"Servers",content:["You can connect to any Napix server.","By default, you are connected to the server","you are surfing on."].join("\n"),trigger:"manual",placement:"left",action:function(){b.DELETE("/sample/1/127.0.0.1",function(){},function(){});f("#explorer-label a").tab("show");d()}},{el:"#connections-servers-prompt",action:function(){c.panels.selectors.serverSelector.showPrompt();f("#connections-servers-prompt input[name='host']").prop("value","this.napix.nx")},title:"Add a server",content:["just type the url of the server"].join("\n"),trigger:"manual",placement:"left"},{el:null,action:function(){c.panels.selectors.serverSelector.addItem()}},{el:"#connections-servers .icon-remove:eq(1)",title:"Remove the server",content:["This button removes the server from the list"].join("\n"),trigger:"manual",placement:"bottom"},{el:"#connections-servers-body li:first",tilte:"Select the server",contents:"Click on the server address to choose it",trigger:"manual",placement:"left",action:function(){d();l.first().select()}},{el:"#connections-credentials",title:"Same thing for the credentials",content:"",trigger:"manual",placement:"left"},{el:"#explorer-server",title:"Server root",content:["This is the root of the server.","You can browse the objects and the managers"].join("\n"),trigger:"manual",action:function(){c.panels.explorer.goToPath("/sample")}},{el:"#explorer-server .deploy:first",title:"Explore the manager",content:["Click on the plus in order to","deploy the content of the manager"].join("\n"),trigger:"manual",action:function(){c.panels.explorer.rootView.views["/sample"].toggleContent(true)}},{el:"#explorer-server .path:contains('/sample/1')",title:"Get an object",content:["Click on the object path","to get its content in the object tab"].join("\n"),trigger:"manual",action:function(){c.panels.explorer.rootView.views["/sample"].contentViews["/sample/1"].selectObject()}},{el:"#explorer-object-label",title:"Object Tab",content:["In this tab you can view","the data of the selected object"].join("\n"),trigger:"manual",placement:"bottom",action:function(){f("#explorer-object-label").tab("show")}},{el:"#explorer-help-label",title:"Help Tab",content:["In this tab you can view the metadata of the selected manager","Those metadata are generated by the class from the Napix modules"].join("\n"),trigger:"manual",placement:"bottom",action:function(){f("#explorer-help-label").tab("show")}},{el:"#explorer-create-label",title:"Create Tab",content:["In this tab you can create","a new object of the selected manager"].join("\n"),trigger:"manual",placement:"bottom",action:function(){f("#explorer-create-label").tab("show")}},{el:"#explorer-create",title:"Editor",content:["You can use this editor to","create the object you'll send"].join("\n"),trigger:"manual"},{el:"#explorer-create button:contains('Text')",title:"Text editor",content:["You can use the text editor to","edit directly the JSON object"].join("\n"),placement:"bottom",trigger:"manual"},{el:"#explorer-create .json-mte:first",title:"Type switcher",content:["Use this little toolbar to change the type of","JSON data you want to send","The red X at the end deletes the entry"].join("\n"),placement:"left",trigger:"manual"},{el:"#explorer-create button:contains('Validate')",title:"Validate button",content:["Send the result"].join("\n"),placement:"left",trigger:"manual"},{el:null,action:function(){c.panels.explorer.create.trigger("validate","/sample/1",{ip:"127.0.0.1",hostnames:["localhost"]})}},{el:"#explorer-server .path:contains('/sample/1/127.0.0.1')",title:"Created resource",content:["The resource is created and got its own address"].join("\n"),trigger:"manual",action:function(){f(".alert").alert("close");c.panels.explorer.rootView.views["/sample"].contentViews["/sample/1"].contentViews["/sample/1/127.0.0.1"].selectObject()}},{el:"#explorer-object-actions button:contains('Edit')",title:"Modify the object",content:"Click on this button to edit the object",trigger:"manual"},{el:null,action:function(){c.panels.explorer.showEdit()}},{el:"#explorer-edit button:contains('Validate')",title:"Sending wrong data",content:"This will result in an error",trigger:"manual",placement:"bottom",action:function(){var i=c.panels.explorer.edit.view.view.view.valueViews[1];i.trigger("pop",i)}},{el:null,action:function(){c.panels.explorer.sendPUT("/sample/1/127.0.0.1",{ip:"127.0.0.1"})}},{el:"#explorer .alert",title:"The error",content:["It pops when a request does not succeed","It shows the kind of error and the associated text","You may click the retry button to resubmit the request","You still can edit the data and resubmit it"].join("\n"),trigger:"manual",placement:"bottom"},{el:"#explorer .alert .close",title:"Close the alert",content:"Click the X to close the alert",trigger:"manual",placement:"left"},{el:null,action:function(){f(".alert").alert("close");f("#explorer-object-label").tab("show")}},{el:"#console",title:"The console",content:"Show the console. With this console you can type commands",placement:"right",trigger:"manual",action:function(){f("#console-label a").tab("show")}},{el:"#console-prompt",title:"Prompt",content:["Type the command you want to run in this prompt.",'Commands include "help", "servers", "login", "GET" '].join("\n"),placement:"right",trigger:"manual",action:function(){f("#console-prompt input:text").attr("value","GET /")}},{el:null,action:function(){c.panels.console.prompt_.validate()}}];var g=-1;var n=null;var k=function(){g-=1;o(false)};var h=function(){g+=1;o(true)};var o=function(q){if(n){f(n).popover("hide")}var i=p[g];if(!i){if(g==p.length){g=-1}return}n=i.el;if(q&&i.action){i.action.call()}f(n).popover(i).popover("show");return true};var j=false;var m=function(){j=false;if(n){f(n).popover("hide");g=-1}f("#firstrun").removeClass("active");f("#firstrun-controls").remove()};var a=function(){if(!j){j=true;f("#firstrun").addClass("active").parent().append(f('<li id="firstrun-controls" ><a href="#"><i class="icon-arrow-left icon-white" /><i class="icon-arrow-right icon-white" /><i class="icon-stop icon-white" /></a></li>')).on("click",".icon-arrow-left",k).on("click",".icon-arrow-right",h).on("click",".icon-stop",m)}h()};return a});