define("json/viewer",["Backbone","underscore","jQuery"],function(a,b,c){var d=a.View.extend({tagName:"span",className:"json-simple",viewName:"simple",complex:!1,initialize:function(a){this.value=String(a)},render:function(){return this.$el.text(this.value),this}}),e=d.extend({viewName:"empty",initialize:function(a){this.value="?",b.any([[b.isNull,"null"],[b.isString,"Empty String"],[b.isArray,"Empty Array"],[b.bind(b.identity,b,!0),"Empty Object"]],function(b){return b[0](a)?(this.value=b[1],!0):!1},this)}}),f=a.View.extend({tagName:"ol",viewName:"array",complex:!0,initialize:function(a){this.listViews=b.map(a,i.getView,i)},render:function(){return b.each(this.listViews,function(a){c("<li />").append(a.render().el).appendTo(this.el)},this),this}}),g=a.View.extend({viewName:"key",complex:!1,tagName:"li",initialize:function(a,b){this.key=a,this.valueView=i.getView(b)},render:function(){return this.valueView.complex?c("<dd />").append(c("<dl />",{"class":"json-key",text:this.key})).append(c("<dt />").append(this.valueView.render().el)).appendTo(this.el):c("<div />").append(c("<span />",{"class":"json-key",text:this.key})).append(" ").append(this.valueView.render().el).appendTo(this.el),this}}),h=a.View.extend({tagName:"ul",viewName:"object",complex:!0,initialize:function(a){this.keyViews=b.map(b.keys(a),function(b){return new g(b,a[b])})},render:function(){return b.each(this.keyViews,function(a){this.$el.append(a.render().el)},this),this}}),i=a.View.extend({className:"json-object json",tagName:"div",initialize:function(a){this.inside=this.constructor.getView(a)},render:function(){return this.$el.append(this.inside.render().el),this}},{getViewClass:function(a){var b;for(b in this.viewsMap)if(this.viewsMap[b][0](a))return this.viewsMap[b][1];return this.defaultView},getView:function(a){var b=this.getViewClass(a);return new b(a)},viewsMap:[[b.isBoolean,d],[b.isNumber,d],[b.isNull,e],[b.isEmpty,e],[b.isString,d],[b.isArray,f]],defaultView:h});return i})