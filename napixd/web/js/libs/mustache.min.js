define(function(){
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
var a=(typeof module!=="undefined"&&module.exports)||{};(function(x){x.name="mustache.js";x.version="0.5.0-dev";x.tags=["{{","}}"];x.parse=n;x.compile=f;x.render=w;x.clearCache=v;x.to_html=function(B,z,A,C){var y=w(B,z,A);if(typeof C==="function"){C(y)}else{return y}};var t=Object.prototype.toString;var g=Array.isArray;var c=Array.prototype.forEach;var h=String.prototype.trim;var j;if(g){j=g}else{j=function(y){return t.call(y)==="[object Array]"}}var s;if(c){s=function(z,A,y){return c.call(z,A,y)}}else{s=function(B,C,A){for(var z=0,y=B.length;z<y;++z){C.call(A,B[z],z,B)}}}var l=/^\s*$/;function d(y){return l.test(y)}var q;if(h){q=function(y){return y==null?"":h.call(y)}}else{var o,i;if(d("\xA0")){o=/^\s+/;i=/\s+$/}else{o=/^[\s\xA0]+/;i=/[\s\xA0]+$/}q=function(y){return y==null?"":String(y).replace(o,"").replace(i,"")}}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function p(y){return String(y).replace(/&(?!\w+;)|[<>"']/g,function(z){return e[z]||z})}function m(E,G,H,A){A=A||"<template>";var I=G.split("\n"),y=Math.max(H-3,0),B=Math.min(I.length,H+3),z=I.slice(y,B);var F;for(var C=0,D=z.length;C<D;++C){F=C+y+1;z[C]=(F===H?" >> ":"    ")+z[C]}E.template=G;E.line=H;E.file=A;E.message=[A+":"+H,z.join("\n"),"",E.message].join("\n");return E}function u(y,G,F){if(y==="."){return G[G.length-1]}var E=y.split(".");var C=E.length-1;var D=E[C];var H,z,B=G.length,A,I;while(B){I=G.slice(0);z=G[--B];A=0;while(A<C){z=z[E[A++]];if(z==null){break}I.push(z)}if(z&&typeof z==="object"&&D in z){H=z[D];break}}if(typeof H==="function"){H=H.call(I[I.length-1])}if(H==null){return F}return H}function k(B,y,F,A){var z="";var D=u(B,y);if(A){if(D==null||D===false||(j(D)&&D.length===0)){z+=F()}}else{if(j(D)){s(D,function(G){y.push(G);z+=F();y.pop()})}else{if(typeof D==="object"){y.push(D);z+=F();y.pop()}else{if(typeof D==="function"){var C=y[y.length-1];var E=function(G){return w(G,C)};z+=D.call(C,F(),E)||""}else{if(D){z+=F()}}}}}return z}function n(aa,C){C=C||{};var L=C.tags||x.tags,M=L[0],H=L[L.length-1];var z=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'];var G=[],ab=false,Y=false;var W=function(){if(ab&&!Y&&!C.space){while(G.length){z.splice(G.pop(),1)}}else{G=[]}ab=false;Y=false};var T=[],Q,D,N;var V=function(ac){L=q(ac).split(/\s+/);D=L[0];N=L[L.length-1]};var K=function(ac){z.push('";',Q,'\nvar partial = partials["'+q(ac)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')};var y=function(ae,ac){var ad=q(ae);if(ad===""){throw m(new Error("Section name may not be empty"),aa,J,C.file)}T.push({name:ad,inverted:ac});z.push('";',Q,'\nvar name = "'+ad+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')};var F=function(ac){y(ac,true)};var U=function(ad){var ac=q(ad);var af=T.length!=0&&T[T.length-1].name;if(!af||ac!=af){throw m(new Error('Section named "'+ac+'" was never opened'),aa,J,C.file)}var ae=T.pop();z.push('";',"\n    return buffer;","\n  };","\n})();");if(ae.inverted){z.push("\nbuffer += renderSection(name,stack,callback,true);")}else{z.push("\nbuffer += renderSection(name,stack,callback);")}z.push('\nbuffer += "')};var X=function(ac){z.push('";',Q,'\nbuffer += lookup("'+q(ac)+'",stack,"");','\nbuffer += "')};var A=function(ac){z.push('";',Q,'\nbuffer += escapeHTML(lookup("'+q(ac)+'",stack,""));','\nbuffer += "')};var J=1,Z,E;for(var R=0,S=aa.length;R<S;++R){if(aa.slice(R,R+M.length)===M){R+=M.length;Z=aa.substr(R,1);Q="\nline = "+J+";";D=M;N=H;ab=true;switch(Z){case"!":R++;E=null;break;case"=":R++;H="="+H;E=V;break;case">":R++;E=K;break;case"#":R++;E=y;break;case"^":R++;E=F;break;case"/":R++;E=U;break;case"{":H="}"+H;case"&":R++;Y=true;E=X;break;default:Y=true;E=A}var B=aa.indexOf(H,R);if(B===-1){throw m(new Error('Tag "'+M+'" was not closed properly'),aa,J,C.file)}var P=aa.substring(R,B);if(E){E(P)}var O=0;while(~(O=P.indexOf("\n",O))){J++;O++}R=B+H.length-1;M=D;H=N}else{Z=aa.substr(R,1);switch(Z){case'"':case"\\":Y=true;z.push("\\"+Z);break;case"\r":break;case"\n":G.push(z.length);z.push("\\n");W();J++;break;default:if(d(Z)){G.push(z.length)}else{Y=true}z.push(Z)}}}if(T.length!=0){throw m(new Error('Section "'+T[T.length-1].name+'" was not closed properly'),aa,J,C.file)}W();z.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var I=z.join("").replace(/buffer \+= "";\n/g,"");if(C.debug){if(typeof console!="undefined"&&console.log){console.log(I)}else{if(typeof print==="function"){print(I)}}}return I}function r(C,A){var z="view,partials,stack,lookup,escapeHTML,renderSection,render";var y=n(C,A);var B=new Function(z,y);return function(E,F){F=F||{};var D=[E];try{return B(E,F,D,u,p,k,w)}catch(G){throw m(G.error,C,G.line,A.file)}}}var b={};function v(){b={}}function f(z,y){y=y||{};if(y.cache!==false){if(!b[z]){b[z]=r(z,y)}return b[z]}return r(z,y)}function w(A,y,z){return f(A)(y,z)}})(a);return a});