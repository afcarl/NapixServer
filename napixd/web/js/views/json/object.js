define(["Backbone","jQuery","keyevent","libs/mustache"],function(e,t,n,r){var i=e.View.extend({tagName:"span",className:"label label-inverse",events:{dblclick:"edit","blur input":"show",keypress:"onKeyPress"},initialize:function(e){this.key=e,this.editing=!1},onKeyPress:function(e){return e.keyCode===n.DOM_VK_ENTER?(this.show(),!1):!0},show:function(){return this.editing&&(this.editing=!1,this.key=this.$("input").attr("value"),this.$el.text(this.key)),!0},edit:function(){return this.editing||(this.editing=!0,t("<input />",{tabindex:"1",type:"text",value:this.key}).appendTo(this.$el.empty()).focus()),!1},render:function(){return this.$el.text(this.key),this.key===""?this.edit():this.show(),this},getValue:function(){return this.key}}),s=e.View.extend({tagName:"dd",initialize:function(e,t){this.key=e,this.valueView=t,this.valueView.bind("pop",this.repop,this)},repop:function(){this.trigger("pop",this)},template:r.compile('<dl> <span class="label label-info">{{ key }}</span>: </dl><dt> </dt>'),render:function(){return this.$el.append(this.template({key:this.key})),this.$("dt").append(this.valueView.render().el),this},getKey:function(){return this.key},getValue:function(){return[this.getKey(),this.valueView.getValue()]}}),o=s.extend({className:"okev",initialize:function(e,t){this.keyView=new i(e),this.valueView=t,this.valueView.bind("pop",this.repop,this)},render:function(){return this.$el.append(this.keyView.render().el).append(t("<dt />").append(this.valueView.render().el)),this},getKey:function(){return this.keyView.getValue()}});return{fixed:s,edit:o}})